import{c as ce,a as y,t as x}from"../chunks/qhCaCgHc.js";import{i as ue}from"../chunks/8bq-mjS9.js";import{ab as fe,aa as me,ac as pe,j as t,m as p,b as a,ad as e,ae as s,af as o,ag as g}from"../chunks/CnglX5le.js";import{s as c,e as O,r as de}from"../chunks/8PFJ6ntA.js";import{i as A}from"../chunks/Dy2_i3Fl.js";import{r as be,s as N}from"../chunks/BY3XG9Md.js";import{t as B,f as R,a as _e}from"../chunks/D7ZupLfI.js";import{b as U}from"../chunks/ClStUPh4.js";import{L as ye,p as he}from"../chunks/BzxdUOsR.js";import{s as ke,a as ge}from"../chunks/D31U_0fv.js";import{t as xe}from"../chunks/D9tAFEM4.js";import{o as we}from"../chunks/BqiK9gpZ.js";var Fe=x('<div class="success-message svelte-13fke6y"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-13fke6y"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg> <p class="svelte-13fke6y"> </p> <button class="btn-new svelte-13fke6y">Отправить еще запрос</button></div>'),$e=x('<div class="error-message svelte-13fke6y"> </div>'),Pe=x('<form class="business-form svelte-13fke6y"><div class="form-group svelte-13fke6y"><label for="purpose" class="svelte-13fke6y"> </label> <textarea id="purpose" rows="5" required class="svelte-13fke6y"></textarea></div> <div class="form-group svelte-13fke6y"><label for="contact" class="svelte-13fke6y"> </label> <input type="text" id="contact" required class="svelte-13fke6y"></div> <!> <button type="submit" class="btn-submit svelte-13fke6y"> </button></form>'),Se=x('<main class="svelte-13fke6y"><div class="business-container svelte-13fke6y"><div class="content svelte-13fke6y"><div class="header-top svelte-13fke6y"><button class="back-link svelte-13fke6y"> </button> <!></div> <div class="form-container svelte-13fke6y"><h1 class="svelte-13fke6y"> </h1> <!></div></div></div></main>');function Ie(V,z){fe(z,!1);const[G,K]=ke(),r=()=>ge(xe,"$translations",G),Q="http://localhost:3001/api";let d=p(""),b=p(""),h=p(!1),w=p(!1),u=p(""),F=p(!1);we(()=>{t(F,!0)});function W(){t(F,!1),setTimeout(()=>{window.location.href="/"},600)}async function X(){if(!a(d)||!a(b)){t(u,"Пожалуйста, заполните все поля");return}try{t(h,!0),t(u,"");const l=await(await fetch(`${Q}/business`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({purpose:a(d),contact:a(b)})})).json();l.success?(t(w,!0),t(d,""),t(b,"")):t(u,l.message||r().businessForm.error)}catch(f){console.error("Error submitting form:",f),t(u,r().businessForm.error)}finally{t(h,!1)}}ue();var D=ce(),Y=me(D);{var Z=f=>{var l=Se(),E=e(l),H=e(E),$=e(H),k=e($),ee=e(k);s(k);var se=o(k,2);ye(se,{}),s($);var I=o($,2),P=e(I),te=e(P,!0);s(P);var ae=o(P,2);{var re=m=>{var i=Fe(),n=o(e(i),2),_=e(n,!0);s(n);var S=o(n,2);s(i),g(()=>c(_,r().businessForm.success)),O("click",S,()=>t(w,!1)),B(3,i,()=>_e),y(m,i)},oe=m=>{var i=Pe(),n=e(i),_=e(n),S=e(_,!0);s(_);var j=o(_,2);de(j),s(n);var T=o(n,2),L=e(T),ie=e(L,!0);s(L);var M=o(L,2);be(M),s(T);var J=o(T,2);{var le=v=>{var C=$e(),ve=e(C,!0);s(C),g(()=>c(ve,a(u))),y(v,C)};A(J,v=>{a(u)&&v(le)})}var q=o(J,2),ne=e(q,!0);s(q),s(i),g(()=>{c(S,r().businessForm.purpose),N(j,"placeholder",r().businessForm.purposePlaceholder),c(ie,r().businessForm.contact),N(M,"placeholder",r().businessForm.contactPlaceholder),q.disabled=a(h),c(ne,a(h)?"Отправка...":r().businessForm.submit)}),U(j,()=>a(d),v=>t(d,v)),U(M,()=>a(b),v=>t(b,v)),O("submit",i,he(X)),y(m,i)};A(ae,m=>{a(w)?m(re):m(oe,!1)})}s(I),s(H),s(E),s(l),g(()=>{c(ee,`← ${r().name??""}`),c(te,r().businessForm.title)}),O("click",k,W),B(1,l,()=>R,()=>({x:1e3,duration:500})),B(2,l,()=>R,()=>({x:-1e3,duration:500})),y(f,l)};A(Y,f=>{a(F)&&f(Z)})}y(V,D),pe(),K()}export{Ie as component};
